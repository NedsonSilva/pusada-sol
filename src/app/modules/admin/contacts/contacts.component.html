<div class="absolute inset-0 flex flex-col p-2.5 min-w-0 overflow-hidden">
    <div class="flex gap-5 items-center justify-between p-2 pb-4">
        <div class="grow-[2]">
            <h1 class="text-2xl text-primary font-medium">Contatos</h1>
        </div>
        <div class="grow flex items-center gap-5 max-w-120">
            <div class="grow">
                <mat-form-field class="w-full zuzi-mat-no-subscript zuzi-mat-dense">
                    <mat-icon matIconPrefix svgIcon="mat_outline:search"></mat-icon>
                    <input matInput placeholder="Pesquisar">
                </mat-form-field>
            </div>
            <div>
                <split-button label="Adicionar Contato" [showIconMenu]="false" (onClick)="openModalFormContact()">
                </split-button>
            </div>
        </div>
    </div>
    <div class="flex flex-col flex-auto overflow-hidden border shadow-md bg-card h-full relative">
        <div class="w-full overflow-x-auto">
            <table mat-table matSort [dataSource]="contacts?.data" [trackBy]="trackByFn">
                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-base text-default my-0">
                        Nome
                    </th>
                    <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                </ng-container>

                <ng-container matColumnDef="phone">
                    <th mat-header-cell *matHeaderCellDef class="text-base text-default my-0">
                        Telefone
                    </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.phone }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef class="text-base text-default my-0">
                        E-mail
                    </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.email }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="createdAt">
                    <th mat-header-cell *matHeaderCellDef class="text-base text-default my-0">
                        Criado Em
                    </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.createdAt | date:'dd/MM/y HH:mm' }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef class="text-base text-default my-0 w-10">
                        Ações
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <button mat-icon-button [matMenuTriggerFor]="menuActions">
                            <mat-icon svgIcon="heroicons_outline:dots-vertical" class="text-current"></mat-icon>
                        </button>
                        <mat-menu #menuActions>
                            <button (click)="openModalFormContact(element)" mat-menu-item>
                                Editar
                            </button>
                            <button (click)="deleteContact(element)" mat-menu-item class="text-warn">
                                Excluir
                            </button>
                        </mat-menu>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover:bg-hover transition"></tr>
            </table>
        </div>
        <div class="mt-auto">
            <mat-paginator
                class="bg-card font-medium"
                [length]="contacts?.count"
                [pageIndex]="filter.pageNumber - 1"
                [pageSize]="contacts?.perPage"
                [showFirstLastButtons]="true"
                [disabled]="loading()"
                (page)="setPage($event)"
                [pageSizeOptions]="[20, 40, 80, 100]">
            </mat-paginator>
        </div>
    </div>
</div>
